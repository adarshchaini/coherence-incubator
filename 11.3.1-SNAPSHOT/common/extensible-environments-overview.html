<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-05-03
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160503" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Oracle Coherence Incubator - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="shortcut icon" href="images/incubator-logo.ico"/>
                      
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-incubator/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Incubator Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-05-03</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 11.3.1-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Coherence Incubator</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                  
      <li>
    
                          <a href="../upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                  
      <li>
    
                          <a href="../examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="../support.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                              <li class="nav-header">Development</li>
                                
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                  
      <li>
    
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                  
      <li>
    
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                  
      <li>
    
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">Modules</li>
                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="../common/index.html" title="The Common Package">
          <i class="icon-chevron-down"></i>
        The Common Package</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Extensible Environments</a>
          </li>
                      
      <li>
    
                          <a href="../common/extensible-environments-namespaces.html" title="Cache Config Namespaces">
          <i class="none"></i>
        Cache Config Namespaces</a>
            </li>
                      
      <li>
    
                          <a href="../common/extensible-environments-tutorial.html" title="Custom Namespaces Tutorial">
          <i class="none"></i>
        Custom Namespaces Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../common/coherence-namespace.html" title="The Coherence Namespace">
          <i class="none"></i>
        The Coherence Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/element-namespace.html" title="The Element Namespace">
          <i class="none"></i>
        The Element Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/filter-namespace.html" title="The Filter Namespace">
          <i class="none"></i>
        The Filter Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/jndi-namespace.html" title="The JNDI Namespace">
          <i class="none"></i>
        The JNDI Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../common/instance-namespace.html" title="The Instance Namespace*">
          <i class="none"></i>
        The Instance Namespace*</a>
            </li>
                      
      <li>
    
                          <a href="../common/value-namespace.html" title="The Value Namespace*">
          <i class="none"></i>
        The Value Namespace*</a>
            </li>
                      
      <li>
    
                          <a href="../common/amazon-ec2-addressprovider.html" title="Working with Amazon EC2">
          <i class="none"></i>
        Working with Amazon EC2</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../commandpattern/index.html" title="The Command Pattern">
          <i class="icon-chevron-down"></i>
        The Command Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../commandpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                              
      <li>
    
                          <a href="../functorpattern/index.html" title="The Functor Pattern">
          <i class="icon-chevron-down"></i>
        The Functor Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../functorpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../processingpattern/index.html" title="The Processing Pattern">
          <i class="icon-chevron-down"></i>
        The Processing Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../processingpattern/configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/monitoring.html" title="Monitoring">
          <i class="none"></i>
        Monitoring</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/processing-namespace.html" title="The Processing Namespace">
          <i class="none"></i>
        The Processing Namespace</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/simple-example.html" title="Simple Example">
          <i class="none"></i>
        Simple Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/pi-calculation-example.html" title="Pi Calculation Example">
          <i class="none"></i>
        Pi Calculation Example</a>
            </li>
                      
      <li>
    
                          <a href="../processingpattern/task-execution-example.html" title="Task Execution Example">
          <i class="none"></i>
        Task Execution Example</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../messagingpattern/index.html" title="The Messaging Pattern">
          <i class="none"></i>
        The Messaging Pattern</a>
            </li>
                                                              
      <li>
    
                          <a href="../eventdistributionpattern/index.html" title="The Event Distribution Pattern">
          <i class="icon-chevron-down"></i>
        The Event Distribution Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../eventdistributionpattern/event-namespace.html" title="The Event Namespace">
          <i class="none"></i>
        The Event Namespace</a>
            </li>
              </ul>
        </li>
                                                                                                                                                        
      <li>
    
                          <a href="../pushreplicationpattern/index.html" title="The Push Replication Pattern">
          <i class="icon-chevron-down"></i>
        The Push Replication Pattern</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-tutorial.html" title="Active Passive Tutorial">
          <i class="none"></i>
        Active Passive Tutorial</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-passive-example.html" title="Active Passive Example">
          <i class="none"></i>
        Active Passive Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/active-active-example.html" title="Active Active Example">
          <i class="none"></i>
        Active Active Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/hub-and-spoke-example.html" title="Hub And Spoke Example">
          <i class="none"></i>
        Hub And Spoke Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/auction-example.html" title="Auction Example">
          <i class="none"></i>
        Auction Example</a>
            </li>
                      
      <li>
    
                          <a href="../pushreplicationpattern/web-example.html" title="Web Example">
          <i class="none"></i>
        Web Example</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>Extensible Environments</h2>

<p>One of the architectural components we've noticed developers introduce into 
Coherence deployments is the requirement for short-lived applications that 
perform some kind of initialization or maintenance of a cluster, prior to an 
application officially starting to use a cluster.   For example one or more of 
the following types of "setup/maintenance applications" are often seen 
along-side cluster deployments;</p>

<ul>
<li>An application establishing domain-specific cache entry indexes,</li>
<li>An application that preloads/warms cached information,</li>
<li>An application that loads configuration into a cluster,</li>
<li>An application that runs background/scheduled tasks against the cluster, or</li>
<li>An application that is designed explicitly to integrate with external systems 
(like reading messages from external queues/topics to keep caches up-to-date)</li>
</ul>

<p>While these applications are usually relatively simple to create and run, the 
fact that they are often deployed and executed somewhat independently from a 
cluster itself means their deployment may suffer operationally in two ways;</p>

<ol>
<li>Their configuration is often independent of the cluster itself, leading to 
the maintenance of multiple but related configurations.  This may lead to
mis-configuration.</li>
<li>Their execution, deployment and management typically does not have the 
same high-availability characteristics of the cluster itself, thus leading 
to potential issues if their execution fails.  eg: If an application 
feeding data into a cluster fails, the recovery of said failures is often 
becomes manual (ie: human) effort, during which time there's the possibility 
that the cluster may "miss" updates from a feed.</li>
</ol>

<p>Consequently the primary goals for the introduction of Extensible Environments 
into Coherence is to permit;</p>

<ol>
<li>The consolidation of said application configuration where possible within a 
standard cache configuration file.</li>
<li>The embedding of said application into a running cluster such that failure 
of the said processing may be managed by Coherence itself - ie: in a 
high-availability and scalable environment - thus permitting a hands-free 
and automated recovery of failed any application logic.</li>
</ol>

<p>Taking inspiration from the work carried out by the <a href="http://ant.apache.org/">Apache Ant</a> 
project with <a href="http://ant.apache.org/manual/CoreTypes/antlib.html">antlibs</a>, 
Coherence Common 1.6.0 introduced the concept of an Extensible Environment that 
provided developers with the ability to create and use their own custom XML 
Cache Configurations (as Namespaces) with in standard Coherence Cache 
Configuration files.   </p>

<p>For example, by using an Extensible Environment developers may declare cache 
configurations for Coherence as follows;</p>

<pre><code>&lt;cache-config xmlns:run="class://RunNamespaceContentHandler"&gt;

    &lt;run:runnable classname="MyRunnable" every="10m"/&gt;

    ... regular cache configuration ...

&lt;/cache-config&gt;
</code></pre>

<p>In this fictitious example, the XML namespace "run" is declared as part of the 
<code>cache-config</code> element thus making the use of the "run" namespace and it's 
corresponding elements (ie: the "run:runnable" element) valid for use within 
the cache configuration file.  How and what the "run:runnable" element does to 
the Coherence Member is defined by the namespace content handler specified by 
the URI <code>class://RunNamespaceContentHandler</code>.  The mechanics of this is 
described in detail here <a href="extenisble-environments-">Introduction to XML Cache Configuration Namespaces</a> 
and in the <a href="extensible-environments-tutorial.html">tutorial</a></p>

<blockquote>
  <p>  In the above example the XML namespace "run" and it's associated XML namespace 
    content handler "RunNamespaceHandler" are <em>not shipped as part</em> of Coherence 
    itself.  It, like other namespaces, may be developed, supported and deployed 
    independently of Coherence itself and Oracle Engineering.</p>
</blockquote>

<p>The following sections of this document provide background concerning the 
Coherence Bootstrap Procedure, the concept of a Configurable Cache Factory, 
the Default Configuration Cache Factory (built into Coherence itself) and the 
<code>ExtensibleEnvironment</code> class, a new Cache Configuration Factory that provides 
support for XML Namespaces within standard Coherence Cache Configuration files.</p>

<h4>The Coherence Bootstrap Procedure</h4>

<p>When an application first makes use of Coherence API, say for example performing 
a <code>CacheFactory.getCache(...)</code> call, if it hasn't done so already (due to say 
<code>auto-start</code> declarations), Coherence will commence it's boot-strap procedure. <br />
At the highest level this procedure simply involves locating and loading the 
Coherence Operational Configuration so that the components within Coherence have 
an appropriate configuration so that they may initialize themselves. <br />
For example, the Coherence Operational Configuration determines how the internal 
logging is configured, what underlying services are available, how the cluster 
is established and maintained, how the cluster may be secured and so on.</p>

<h4>The Configurable Cache Factory</h4>

<p>One of the most important and perhaps interesting parts of the Coherence Operational 
Configuration, at least for the purposes of this discussion, is in specifying 
how Coherence should:</p>

<ul>
<li>load, define and manage Cache Configurations and</li>
<li>how to instantiate caches when our applications request them. <br /></li>
</ul>

<p>That is, like other bootstrap-requiring components mentioned above, the Coherence 
Operational Configuration additionally provides the ability to (re)define the 
central mechanism and behavior governing the interpretation of Coherence Cache 
Configuration files, including the instantiation of caches defined with in said files.  </p>

<p>With in Coherence the programmatic interface used to define the said cache 
configuration behavior is called the <code>ConfigurableCacheFactory</code> and the 
implementation used at runtime by Coherence is configured in the Coherence 
Operational Configuration by the <code>configurable-cache-factory-config</code> element.</p>

<blockquote>
  <p>  While it may seem that the Coherence <code>CacheFactory</code> is responsible for 
    constructing the caches used by our applications, this responsibility is 
    internally delegated to the <code>ConfigurableCacheFactory</code>.  That is, for the 
    most part the <code>CacheFactory</code> implementation simply delegates it's semantics 
    to other core classes, including the configured <code>ConfigurableCacheFactory</code> 
    implementation.</p>
</blockquote>

<p>For example, the <code>tangosol-coherence-override.xml</code> file that ships as part of 
Coherence Common specifies the use of the <code>ExtensibleEnvironment</code> to manage 
cache configurations as follows;</p>

<pre><code>&lt;coherence&gt;
    &lt;configurable-cache-factory-config&gt;
        &lt;class-name&gt;com.oracle.coherence.environment.extensible.ExtensibleEnvironment&lt;/class-name&gt;
        &lt;init-params&gt;
            &lt;init-param&gt;
                &lt;param-type&gt;java.lang.String&lt;/param-type&gt;
                &lt;param-value system-property="tangosol.coherence.cacheconfig"&gt;coherence-cache-config.xml&lt;/param-value&gt;
            &lt;/init-param&gt;
        &lt;/init-params&gt;
    &lt;/configurable-cache-factory-config&gt;
&lt;/coherence&gt;
</code></pre>

<blockquote>
  <p>  Note that the above declaration specifies both default name for coherence 
    cache configuration file ie: <code>coherence-cache-config.xml</code> and the system-property 
    that may be used to override the location and name of said configuration file.</p>
</blockquote>

<p>Out of the box the default implementation of the <code>ConfigurableCacheFactory</code> 
interface wired into the <code>coherence.jar</code> is called the <code>DefaultConfigurableCacheFactory</code>.  </p>

<blockquote>
  <p>  <strong>WARNING</strong> </p>
  
  <p>  When using Coherence Common we override this wiring by embedding a 
    <code>tangosol-coherence-override.xml</code> file (as outlined above) in the <code>coherence-common-x.y.z.jar</code>,
    which forces the use of the <code>ExtensibleEnvironment</code> implementation as the 
    <code>ConfigurableCacheFactory</code>.  This <em>only</em> works however if the <code>coherence-common-x.y.z.jar</code>
    precedes the <code>coherence.jar</code> in your application classpath.</p>
</blockquote>

<h4>The ExtensibleEnvironment Class</h4>

<p>The ability to configure and replace the <code>ConfigurableCacheFactory</code> implementation 
Coherence uses to instantiate caches is very useful concept.  For the most part 
it means developers have the ability to intercept, change, extend and override 
the how cache configurations are presented to Coherence and while it seems 
Coherence may already have more than enough configurability, being able to 
completely replace how caches are configured has some significant advantages.  </p>

<p>A good example of this is the <code>ExtensibleEnvironment</code> class, which simply 
pre-processes the XML it was provided through the Coherence Bootstrap Procedure 
to recursively resolve any foreign XML namespace XML elements.  In reality, 
Coherence itself is oblivious to the fact that the cache configuration it 
provided to the <code>ExtensibleEnvironment</code> had been changed.</p>

<p>The <code>ExtensibleEnvironment</code> has proved itself in three important ways.  Firstly 
it allowed developers, the Coherence Community to decompose large 
configurations into smaller more manageable ones.  Secondly it allowed developers, 
and again the Coherence Community to create independent "libraries" that contained 
their own cache configurations to be "contributed" into the configuration of a 
larger enterprise system - which obviously simplified things a lot in large systems. <br />
Lastly it demonstrated to developers that they too could customize Coherence 
behaviour even further through the use of simple changes in Operational Configuration.</p>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2016.
          All Rights Reserved.      
                    
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright © 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 11.3.1-SNAPSHOT: 2016-05-03 18:18</div>
                  
        
                </div>
    </footer>
  </body>
</html>
